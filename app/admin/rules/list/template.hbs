<div class="page-header">
  <h1>Rules</h1>
</div>

<form class="form-inline search-form" {{action "search" on="submit"}}>
  <div class="input-group">
    {{term-input type="text" placeholder="Search..." value=query autosubmit=true ruleType=ruleType include="used"}}
    <span class="input-group-btn">
      <button class="btn btn-default" type="submit">
        <span class="glyphicon glyphicon-search" aria-hidden="true"></span>
      </button>
    </span>
  </div>

  {{#if session.isAdmin}}
    <span class="search-form-or">or</span>

    {{#link-to "admin.rules.new" class="btn btn-default"}}
      Create
    {{/link-to}}
  {{/if}}
</form>

{{#if q}}
  <div class="alert alert-info alert-dismissible" role="alert">
    <button type="button" class="close" data-dismiss="alert" aria-label="Close" {{action "clearSearch"}}>
      <span aria-hidden="true">&times;</span>
    </button>
    Searching for <strong>{{q}}</strong>.
  </div>
{{/if}}

{{#if model.length}}
  {{rule-table rules=model deleteRule="deleteDialog"}}
{{else}}
  No results.
{{/if}}
{{#modal-dialog size="md"}}
    <form {{action "confirmDelete" on="submit"}}>
        <div class="modal-header">
            <h4 class="modal-title text-uppercase" id="myModalLabel">
              Delete Rule
            </h4>
        </div>
        <div class="modal-body clearfix">
            <p><strong>Are you sure you want to delete this rule?</strong></p>

            <p>
                Deleting this rule is not reversible.
            </p>

            <div class="text-center">
                <button type="submit" class="btn btn-danger">Delete Rule</button>
                <button type="button" data-dismiss="modal" aria-label="Cancel" class="btn btn-default">Cancel</button>
            </div>
        </div>
    </form>
{{/modal-dialog}}
